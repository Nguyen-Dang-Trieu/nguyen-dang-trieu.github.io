---
title: File Hex
date: 2024-12-28
categories: ['Computer']
tags: ['Assembly']
author: Trieu
image:
  path: assets/headers/2024-12-28-hex-code.png
  alt: Hex Code
---

# File hex lÃ  gÃ¬
\- CÃ¡c file cÃ³ Ä‘uÃ´i <kbd>*.hex</kbd> Ä‘Æ°á»£c gá»i lÃ  file HEX. Hex lÃ  1 tiÃªu chuáº©n do Intel quy Ä‘á»‹nh. TÃªn Ä‘áº§y Ä‘á»§ cá»§a hex lÃ  Interl HEX. Loáº¡i file nÃ y thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ truyá»n cÃ¡c chÆ°Æ¡ng trÃ¬nh vÃ  dá»¯ 
liá»‡u sáº½ Ä‘Æ°á»£c lÆ°u trá»¯ trong ROM hoáº·c EEPROM. NÃ³ lÃ  má»™t file vÄƒn báº£n ASCII (2 kÃ­ tá»± mÃ£ ASCII biá»ƒu thá»‹ 1 byte Hex) bao gá»“m cÃ¡c dÃ²ng vÄƒn báº£n phÃ¹ há»£p vá»›i Ä‘á»‹nh dáº¡ng file Intel HEX.

\- File nÃ y chá»§ yáº¿u Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ lÆ°u firmware cho vi Ä‘iá»u khiá»ƒn.

# Äinh dáº¡ng file Hex
DÆ°á»›i Ä‘Ã¢y lÃ  hÃ¬nh áº£nh minh há»a vá» 1 file.hex

![Hex Code](/assets/articles/2024/HexFile/2024-12-28-example.png){: .normal }
_Example Hex Code_

Má»—i dÃ²ng sáº½ tuÃ¢n theo **Format** sau

![Format Code](/assets/articles/2024/HexFile/2024-12-28-FormatCode.png){: .normal }
_Format Code_

- `Start code`: má»—i dÃ²ng Ä‘Æ°á»£c coi lÃ  1 frame, vÃ  Ä‘Æ°á»£c báº¯t Ä‘áº§u báº±ng dáº¥u hai cháº¥m " : ".
- `Byte count`: Hai chá»¯ sá»‘ tháº­p lá»¥c phÃ¢n cho biáº¿t sá»‘ byte trong Data. Sá»‘ byte tá»‘i Ä‘a lÃ  `255 (0xFF)`, `16 (0x10)` vÃ  `32 (0x20)` lÃ  cÃ¡c byte thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng.
- `Address`: Bá»‘n chá»¯ sá»‘ tháº­p lá»¥c phÃ¢n cho biáº¿t Ä‘á»™ lá»‡ch (offset) Ä‘á»‹a chá»‰. Äá»‹a chá»‰ váº­t lÃ­ cá»§a dá»¯ liá»‡u Ä‘Æ°á»£c tÃ­nh báº±ng cÃ¡ch thÃªm pháº§n offset nÃ y vÃ o Ä‘á»‹a chá»‰ cÆ¡ sá»Ÿ.
- `Record type`: Hai chá»¯ sá»‘ tháº­p lá»¥c phÃ¢n tá»« 0x00 -> 0x05.

| Command | Description |
| --- | --- |
| 0x00 | Data record | |
| 0x01 | End of File Record | 
| 0x02 | Extended Segment Address Record | 
| 0x03 | Start Segment Address Record | 
| 0x04 | Extended Linear Address Record |
| 0x05 | Start Linear Address Record |

- `Data`: chuá»—i dá»¯ liá»‡u n-byte.
- `Checksum`: Hai chá»¯ sá»‘ tháº­p lá»¥c phÃ¢n Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ xÃ¡c minh ráº±ng giÃ¡ trá»‹ tÃ­nh toÃ¡n Ä‘Æ°á»£c ghi khÃ´ng cÃ³ lá»—i.

##### **Example 1**: `:10000000A8990020C1010408830B040839080408DA`.
![Difference File Bin and File Hex](/assets/articles/2024/HexFile/2024-12-28-Example1.png){: .normal }

- `:`: Báº¯t Ä‘áº§u.
- `0x10`: Sá»‘ byte data = 16.
- `0x00`, `0x00`: Äá»‹a chá»‰ offset nÆ¡i Ä‘á»ƒ lÆ°u dá»¯ liá»‡u. (Ta cÃ³ thá»ƒ hiá»ƒu lÃ  `0x0000`)
- `0x00`: Kiá»ƒu dá»¯ liá»‡u.
- `0xA8` , `0x99`, `0x00`, `0x20`, `0xC1`, `0x01`, `0x04`, `0x08`, `0x83`, `0x0B`, `0x04`, `0x08`, `0x39`, `0x08`, `0x04`, `0x08`: Data (Tá»•ng cá»™ng cÃ³ 16 bytes).
- Byte Check sum = `0xDA`.
  
Äá»ƒ cÃ³ thá»ƒ kiá»ƒm tra lá»—i trong frame thÃ¬: 
  - B1: Tá»•ng giÃ¡ trá»‹ cÃ¡c byte cÃ³ trong frame = `0x10` + `0x00` + `0x00` + `0x00` + `0xA8` + ... + `0x04` + `0x08` = `0x326`
  - B2: Láº¥y byte cuá»‘i cÃ¹ng = `0x26`. 
  - B3: Tá»•ng checksum = (`0x100` - byte cuá»‘i) & `0xFF` = (`0x100` - `0x26`) & `0xFF` = `0xDA` -> Ta tháº¥y Ä‘Æ°á»£c á»Ÿ cuá»‘i frame cÅ©ng lÃ  `0xDA` nÃªn frame nÃ y khÃ´ng cÃ³ `ERROR`.
    
##### **Example 2**: `:00000001FF`. 
ÄÃ¢y lÃ  dÃ²ng cuá»‘i cÃ¹ng trong hÃ¬nh áº£nh bÃªn trÃªn.
- `:`: Báº¯t Ä‘áº§u.
- `0x00`: Sá»‘ byte data = 0.
- `0x00`, `0x00`: Äá»‹a chá»‰ offset nÆ¡i Ä‘á»ƒ lÆ°u dá»¯ liá»‡u.
- `0x01`: End of File Record --> Káº¿t thuc file HEX. 

# Sá»± khÃ¡c biá»‡t giá»¯a File.hex vÃ  File.bin
## 1. CÃ¡ch sá»­ dá»¥ng
- File `*.hex`: Khi láº­p trÃ¬nh vÃ  táº£i xuá»‘ng file Hex, ngÆ°á»i dÃ¹ng khÃ´ng cáº§n pháº£i chá»‰ Ä‘á»‹nh Ä‘á»‹a chá»‰ vÃ¬ thÃ´ng tin bÃªn trong File Hex Ä‘Ã£ bao gá»“m Ä‘á»‹a chá»‰.
- File `*.bin`: Khi ghi file BIN, ngÆ°á»i dÃ¹ng cáº§n pháº£i chá»‰ Ä‘á»‹nh Ä‘á»‹a chá»‰ do File Bin chá»‰ cÃ³ pháº§n `DATA` trong file HEX.
![Difference File Bin and File Hex](/assets/articles/2024/HexFile/2024-12-28-HexBin.png){: .normal }

> TrÃ¡i lÃ  File.hex - Pháº£i lÃ  File.bin.
{: .prompt-warning }

## 2. KÃ­ch thÆ°á»›c File
NhÆ° Ä‘áº§u bÃ i viáº¿t tÃ´i cÃ³ Ä‘á» cáº­p: *File.hex lÃ  má»™t file vÄƒn báº£n ASCII*. Má»—i kÃ­ tá»± trong file Hex sáº½ cÃ³ kÃ­ch thÆ°á»›c lÃ  1 byte.

=> **File Hex** Ã­t nháº¥t pháº£i cÃ³ kÃ­ch thÆ°á»›c lá»›n hÆ¡n gáº¥p Ä‘Ã´i so vá»›i **File Bin**.

Äá»ƒ dá»… hiá»ƒu hÆ¡n thÃ¬ tÃ´i sáº½ láº¥y vÃ­ dá»¥ tá»« hÃ¬nh so sÃ¡nh bÃªn trÃªn.
- `46`: Trong file Hex sáº½ bao gá»“m 2 kÃ­ tá»± lÃ  `4` vÃ  `6`. Tra báº£ng mÃ£ ASCII ta Ä‘Æ°á»£c: `0x34` vÃ  `0x36` => Cáº§n `2 bytes` Ä‘á»ƒ biá»ƒu diá»…n `0x46`.
- `46`: Trong file Bin thÃ¬ chá»‰ cáº§n `1 byte` = `0x46`.
  
**Suy ra**: 
  - *File Hex* cÃ³ 10 bytes data thÃ¬ pháº£i dÃ¹ng Ã­t nháº¥t `20 byte` (chÆ°a ká»ƒ cÃ¡c bytes Ä‘á»ƒ mÃ´ táº£ `Address`, `Byte count`, ...) Ä‘á»ƒ biá»ƒu diá»…n.
  - *File Bin* thÃ¬ cÅ©ng chá»‰ cáº§n `10 byte` lÃ  Ä‘á»§.

# ğŸŒ Reference
- https://scienceprog.com/shelling-the-intel-8-bit-hex-file-format/
